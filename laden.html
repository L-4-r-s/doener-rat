<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dönerladen Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body class="bg-gray-100 text-gray-900 min-h-screen relative z-0">

  <!-- Hintergrundbilder -->
  <div class="fixed inset-0 z-[-2]">
    <img id="bg-1" src="images/bg_mb.jpg" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-300" />
    <img id="bg-2" src="images/bg_rat.jpg" class="absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-300" />
  </div>

  <!-- Hauptinhalt mit glass-panel -->
  <div class="max-w-3xl mx-auto p-4">
    <div class="bg-white/80 backdrop-blur-md rounded-xl shadow-lg p-6">
      <a href="index.html" class="text-blue-600 hover:underline">← Zurück zur Rangliste</a>
      
      <h1 id="laden-name" class="text-2xl font-bold">Ladenname</h1>
      
      <div>
        <img id="laden-bild" src="" alt="Bild vom Döner" class="w-full max-h-96 object-cover rounded shadow" />
      </div>
      
      <div>
        <iframe id="map-frame" class="w-full h-64 rounded shadow" loading="lazy"></iframe>
      </div>
      
      <div>
        <h2 class="text-lg font-semibold mb-2">Details</h2>
        <p id="laden-kommentar" class="whitespace-pre-line text-gray-800"></p>
      </div>
    </div>
  </div>

  <script>
    async function ladeLadenDetails() {
      const urlParams = new URLSearchParams(window.location.search);
      const name = urlParams.get("name");
      if (!name) return;

      const response = await fetch("data/doener.json");
      const daten = await response.json();
      const laden = daten.find(l => l.name === name);

      if (!laden) {
        document.getElementById("laden-name").textContent = "Dönerladen nicht gefunden.";
        return;
      }

      document.getElementById("laden-name").textContent = laden.name;
      document.getElementById("laden-kommentar").textContent = laden.kommentar;

      const bildPfad = `images/${encodeURIComponent(laden.name)}.jpg`;
      document.getElementById("laden-bild").src = bildPfad;
      document.getElementById("laden-bild").alt = `Bild von ${laden.name}`;

      if (laden.mapsUrl) {
        document.getElementById("map-frame").src = laden.mapsUrl;
      } else {
        document.getElementById("map-frame").outerHTML = "<p class='text-gray-600'>Keine Kartenansicht verfügbar.</p>";
      }
    }

    ladeLadenDetails();

    // Scroll-Fade-Effekt für Hintergrund
    window.addEventListener('scroll', () => {
      const scrollY = window.scrollY;
      const fadeStart = 100;
      const fadeEnd = 600;
      const opacity = Math.min(1, Math.max(0, (scrollY - fadeStart) / (fadeEnd - fadeStart)));
      document.getElementById('bg-2').style.opacity = opacity;
    });
  </script>
</body>
</html>
